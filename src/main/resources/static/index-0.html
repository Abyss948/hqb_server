<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="axios.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>花旗银行后台管理系统&nbsp;实时监管</title>

    <link href="CSS/HuaQicss.css" rel="stylesheet" type="text/css">
</head>

<body>
<header><p id="title">&nbsp;&nbsp;&nbsp;花旗银行后台管理系统</p></header>
<div id="lNavTop">
    <div id="lNavCon">
        <ul>
            <li><a href="index-0.html" target="_self">实时监管</a></li>
            <li><a href="index-1.html" target="_self">交易记录</a></li>
            <li><a href="index-2.html" target="_self">调整利率</a></li>
            <li><a href="index-3.html" target="_self">流动性接口</a></li>
            <li><a href="index-4.html" target="_self">手续费统计</a></li>
        </ul>
    </div>
</div>

</body>
</html>
<script>
    var app = new Vue({
        el: "#lNavTop",
        data: {//数据
            admin: {},//存放用户登录的信息
            emps: [],
        },
        methods: {//自定义函数
            logout() {
                localStorage.removeItem("admin");
                location.reload(true);//刷新页面
            },
            //删除员工的操作
            delEmp(id) {
                if (window.confirm("确定要删除这条员工信息吗？")) {
                    var _this = this;
                    axios.get("http://localhost:8989/ems_vue/emp/delete?id=" + id).then(res => {
                        if (res.data.state) {
                            alert(res.data.msg + "点击确定刷新页面！");
                            _this.findAll();//重新加载数据
                        } else {
                            alert(res.data.msg);
                        }
                    });
                }
            },
            //查询员工列表的方法
            findAll() {
                var _this = this;
                axios.get("http://localhost:8989/ems_vue/emp/findAll").then(res => {
                    _this.emps = res.data;
                });
            }
        },
        created() {//生命周期函数
            var userString = localStorage.getItem("admin");
            if (userString) {
                this.admin = JSON.parse(userString);
            } else {
                alert("您尚未登录，点击确定跳转至登录页面！");
                location.href = "./login.html";
            }
            //查询所有信息
            //this.findAll();
        }
    });
</script>